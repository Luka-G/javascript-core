<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>istSOS testing page</title>
    <script type="text/javascript" src="src/closure-library/closure/goog/base.js"></script>
    <script type="text/javascript" src="src/closure-library/closure/goog/deps.js"></script>
    <script type="text/javascript">
        goog.require('goog.net.XhrIo');
        goog.require('goog.events');
        goog.require('goog.events.Event');
        goog.require('goog.events.EventTarget');

    </script>
    <script type="text/javascript" src="src/istsos-core.js"></script>
    <script>
        /** RESPONSE JSON STYLING  */
        var iter = 0;

        function log(obj, str) {
            var p = document.createElement('pre');
            p.setAttribute('id', iter.toString());
            var h = document.createElement('h3');
            h.innerHTML = str;
            document.getElementById('log').appendChild(h);
            document.getElementById('log').appendChild(p);
            document.getElementById(iter.toString()).innerHTML = test_json.prettyPrint(obj);
            document.getElementById('log').appendChild(document.createElement('hr'));
            iter += 1;
        }

        var test_json = {
            replacer: function(match, pIndent, pKey, pVal, pEnd) {
                var key = '<span class=json-key>';
                var val = '<span class=json-value>';
                var str = '<span class=json-string>';
                var r = pIndent || '';
                if (pKey)
                    r = r + key + pKey.replace(/[": ]/g, '') + '</span>: ';
                if (pVal)
                    r = r + (pVal[0] == '"' ? str : val) + pVal + '</span>';
                return r + (pEnd || '');
            },
            prettyPrint: function(obj) {
                var jsonLine = /^( *)("[\w]+": )?("[^"]*"|[\w.+-]*)?([,[{])?$/mg;
                return JSON.stringify(obj, null, 3)
                        .replace(/&/g, '&amp;').replace(/\\"/g, '&quot;')
                        .replace(/</g, '&lt;').replace(/>/g, '&gt;')
                        .replace(jsonLine, test_json.replacer);
            }
        };
    </script>
    <style>
        pre {
            background-color: ghostwhite;
            border: 1px solid silver;
            padding: 10px 20px;
            margin: 20px;
        }
        .json-key {
            color: brown;
        }
        .json-value {
            color: navy;
        }
        .json-string {
            color: olive;
        }

    </style>
</head>
<body>
<div id="log">
</div>
<script type="text/javascript" src="istsos-test.js"></script>
</body>
</html>